2025-06-26 15:35:33,051 - src.dashboard.app - INFO - Dashboard page requested
2025-06-26 15:35:33,052 - werkzeug - INFO - 127.0.0.1 - - [26/Jun/2025 15:35:33] "GET / HTTP/1.1" 200 -
2025-06-26 15:35:33,089 - src.dashboard.app - INFO - Data status requested
2025-06-26 15:35:33,091 - src.dashboard.app - INFO - API summary endpoint called
2025-06-26 15:35:33,093 - src.dashboard.app - INFO - Top vehicles endpoint called with limit: 20
2025-06-26 15:35:33,094 - src.dashboard.app - INFO - Market trends endpoint called
2025-06-26 15:35:33,098 - src.database.database_manager - INFO - Retrieved 0 analysis results
2025-06-26 15:35:33,099 - src.dashboard.app - INFO - Market summary retrieved: True
2025-06-26 15:35:33,099 - src.dashboard.app - WARNING - No analysis results available
2025-06-26 15:35:33,100 - werkzeug - INFO - 127.0.0.1 - - [26/Jun/2025 15:35:33] "GET /api/top-vehicles?limit=20 HTTP/1.1" 200 -
2025-06-26 15:35:33,103 - src.database.database_manager - INFO - Retrieved 0 analysis results
2025-06-26 15:35:33,105 - src.dashboard.app - INFO - Analysis results count: 0
2025-06-26 15:35:33,108 - src.dashboard.app - INFO - Database stats: {'uk_market_data': 532, 'japan_auction_data': 0, 'government_data': 0, 'analysis_results': 0, 'database_size_mb': 0.33}
2025-06-26 15:35:33,109 - src.dashboard.app - INFO - Summary prepared with 0 opportunities
2025-06-26 15:35:33,109 - werkzeug - INFO - 127.0.0.1 - - [26/Jun/2025 15:35:33] "GET /api/summary HTTP/1.1" 200 -
2025-06-26 15:35:33,123 - src.database.database_manager - INFO - Retrieved 532 UK market records
2025-06-26 15:35:33,130 - src.database.database_manager - INFO - Retrieved 0 Japan auction records
2025-06-26 15:35:33,131 - src.database.database_manager - INFO - Retrieved 532 UK market records
2025-06-26 15:35:33,136 - src.database.database_manager - INFO - Retrieved 0 analysis results
2025-06-26 15:35:33,140 - src.database.database_manager - INFO - Retrieved 0 Japan auction records
2025-06-26 15:35:33,142 - werkzeug - INFO - 127.0.0.1 - - [26/Jun/2025 15:35:33] "GET /api/data-status HTTP/1.1" 200 -
2025-06-26 15:35:33,147 - werkzeug - INFO - 127.0.0.1 - - [26/Jun/2025 15:35:33] "GET /api/market-trends HTTP/1.1" 200 -
2025-06-26 15:35:50,469 - src.dashboard.app - INFO - UK data file upload requested
2025-06-26 15:35:50,471 - src.dashboard.app - INFO - Processing UK data file: New__Used_Cars_for_Sale_-_1_1.xlsx
2025-06-26 15:35:50,501 - src.dashboard.app - INFO - File read successfully: 167 rows, 10 columns
2025-06-26 15:35:50,501 - src.dashboard.app - INFO - Available columns: ['Car Title', 'Price', 'Mileage', 'Registration Date', 'Image URL', 'Car Detail URL', 'Seller Location', 'Seller Rating', 'Features', 'Price Label']
2025-06-26 15:35:50,501 - src.dashboard.app - INFO - Processing UK file data with specific columns
2025-06-26 15:35:50,501 - src.dashboard.app - INFO - Input columns: ['Car Title', 'Price', 'Mileage', 'Registration Date', 'Image URL', 'Car Detail URL', 'Seller Location', 'Seller Rating', 'Features', 'Price Label']
2025-06-26 15:35:50,501 - src.dashboard.app - INFO - Column mapping: {'Car Title': 'title', 'Price': 'price', 'Mileage': 'mileage', 'Registration Date': 'registration_date', 'Image URL': 'image_url', 'Car Detail URL': 'url', 'Seller Location': 'location', 'Seller Rating': 'seller_rating', 'Features': 'features', 'Price Label': 'price_label'}
2025-06-26 15:35:50,559 - src.dashboard.app - INFO - Processed UK data: 167 valid records
2025-06-26 15:35:50,560 - src.dashboard.app - INFO - Sample processed record: BMW Shadow (2018) - £18490.0
2025-06-26 15:35:50,582 - src.dashboard.app - INFO - UK data upload completed: 167 vehicles
2025-06-26 15:35:50,583 - werkzeug - INFO - 127.0.0.1 - - [26/Jun/2025 15:35:50] "POST /api/upload-uk-data HTTP/1.1" 200 -
2025-06-26 15:35:56,678 - src.dashboard.app - INFO - Japan data file upload requested
2025-06-26 15:35:56,679 - src.dashboard.app - INFO - Processing Japan data file: japan_mock_data.xlsx
2025-06-26 15:35:56,702 - src.dashboard.app - INFO - File read successfully: 100 rows, 14 columns
2025-06-26 15:35:56,703 - src.dashboard.app - INFO - Processing Japan file data with columns: ['make', 'model', 'year', 'final_price_jpy', 'final_price_gbp', 'mileage_km', 'grade', 'fuel_type', 'transmission', 'body_type', 'colour', 'auction_house', 'auction_date', 'title']
2025-06-26 15:35:56,703 - src.dashboard.app - INFO - Column mapping: {'make': 'make', 'model': 'model', 'year': 'year', 'final_price_jpy': 'final_price_jpy', 'final_price_gbp': 'final_price_gbp', 'mileage_km': 'mileage_km', 'grade': 'grade', 'fuel_type': 'fuel_type', 'transmission': 'transmission', 'body_type': 'body_type', 'colour': 'colour', 'auction_house': 'auction_house', 'auction_date': 'auction_date', 'title': 'title'}
2025-06-26 15:35:56,715 - src.dashboard.app - INFO - Processed Japan data: 100 valid records
2025-06-26 15:35:56,725 - src.database.database_manager - INFO - Universal mapping input columns: ['make', 'model', 'year', 'final_price_jpy', 'final_price_gbp', 'mileage_km', 'grade', 'fuel_type', 'transmission', 'body_type', 'colour', 'auction_house', 'auction_date', 'title', 'auction_id', 'mileage_miles', 'grade_score', 'estimated_import_cost', 'shipping_cost', 'import_duty', 'vat', 'other_costs', 'total_landed_cost', 'source', 'collection_timestamp']
2025-06-26 15:35:56,733 - src.database.database_manager - INFO - Exact: auction_id -> auction_id
2025-06-26 15:35:56,734 - src.database.database_manager - INFO - Exact: title -> title
2025-06-26 15:35:56,734 - src.database.database_manager - INFO - Exact: year -> year
2025-06-26 15:35:56,734 - src.database.database_manager - INFO - Partial: mileage_km -> mileage_km
2025-06-26 15:35:56,735 - src.database.database_manager - INFO - Exact: transmission -> transmission
2025-06-26 15:35:56,735 - src.database.database_manager - INFO - Exact: model -> model
2025-06-26 15:35:56,735 - src.database.database_manager - INFO - Partial: fuel_type -> fuel_type
2025-06-26 15:35:56,737 - src.database.database_manager - INFO - Exact: colour -> colour
2025-06-26 15:35:56,737 - src.database.database_manager - INFO - Exact: auction_house -> auction_house
2025-06-26 15:35:56,737 - src.database.database_manager - INFO - Partial: final_price_jpy -> final_price_gbp
2025-06-26 15:35:56,737 - src.database.database_manager - INFO - Partial: final_price_jpy -> final_price_jpy
2025-06-26 15:35:56,739 - src.database.database_manager - INFO - Partial: total_landed_cost -> total_landed_cost
2025-06-26 15:35:56,739 - src.database.database_manager - INFO - Exact: grade -> grade
2025-06-26 15:35:56,739 - src.database.database_manager - INFO - Exact: grade_score -> grade_score
2025-06-26 15:35:56,739 - src.database.database_manager - INFO - Exact: auction_date -> auction_date
2025-06-26 15:35:56,739 - src.database.database_manager - INFO - Exact: estimated_import_cost -> estimated_import_cost
2025-06-26 15:35:56,739 - src.database.database_manager - INFO - Exact: shipping_cost -> shipping_cost
2025-06-26 15:35:56,739 - src.database.database_manager - INFO - Exact: import_duty -> import_duty
2025-06-26 15:35:56,741 - src.database.database_manager - INFO - Exact: vat -> vat
2025-06-26 15:35:56,741 - src.database.database_manager - INFO - Exact: other_costs -> other_costs
2025-06-26 15:35:56,749 - src.database.database_manager - INFO - Universal mapping completed. Output columns: ['auction_id', 'title', 'year', 'mileage_km', 'transmission', 'model', 'fuel_type', 'engine_details', 'colour', 'steering', 'drive_type', 'seats', 'doors', 'auction_house', 'final_price_gbp', 'final_price_jpy', 'total_landed_cost', 'image_url', 'promo_badges', 'grade', 'grade_score', 'auction_date', 'estimated_import_cost', 'shipping_cost', 'import_duty', 'vat', 'other_costs', 'mileage_miles', 'make']
2025-06-26 15:35:56,777 - src.database.database_manager - ERROR - Traceback: Traceback (most recent call last):
  File "D:\EcelIQ\New\test with excell\src\database\database_manager.py", line 710, in store_japan_data
    valid_rows.to_sql('japan_auction_data', conn, if_exists='append', index=False)
  File "D:\EcelIQ\New\test with excell\venv\lib\site-packages\pandas\core\generic.py", line 2878, in to_sql
    return sql.to_sql(
  File "D:\EcelIQ\New\test with excell\venv\lib\site-packages\pandas\io\sql.py", line 769, in to_sql
    return pandas_sql.to_sql(
  File "D:\EcelIQ\New\test with excell\venv\lib\site-packages\pandas\io\sql.py", line 2379, in to_sql
    return table.insert(chunksize, method)
  File "D:\EcelIQ\New\test with excell\venv\lib\site-packages\pandas\io\sql.py", line 1023, in insert
    num_inserted = exec_insert(conn, keys, chunk_iter)
  File "D:\EcelIQ\New\test with excell\venv\lib\site-packages\pandas\io\sql.py", line 2075, in _execute_insert
    conn.executemany(self.insert_statement(num_rows=1), data_list)
sqlite3.OperationalError: table japan_auction_data has no column named stock_reference

2025-06-26 15:35:56,781 - src.dashboard.app - INFO - Japan data upload completed: 100 vehicles
2025-06-26 15:35:56,782 - werkzeug - INFO - 127.0.0.1 - - [26/Jun/2025 15:35:56] "POST /api/upload-japan-data HTTP/1.1" 200 -
2025-06-26 15:35:59,058 - src.dashboard.app - INFO - Dashboard page requested
2025-06-26 15:35:59,062 - werkzeug - INFO - 127.0.0.1 - - [26/Jun/2025 15:35:59] "GET / HTTP/1.1" 200 -
2025-06-26 15:35:59,123 - src.dashboard.app - INFO - Data status requested
2025-06-26 15:35:59,123 - src.dashboard.app - INFO - API summary endpoint called
2025-06-26 15:35:59,125 - src.dashboard.app - INFO - Top vehicles endpoint called with limit: 20
2025-06-26 15:35:59,126 - src.dashboard.app - INFO - Market trends endpoint called
2025-06-26 15:35:59,130 - src.database.database_manager - INFO - Retrieved 0 analysis results
2025-06-26 15:35:59,130 - src.dashboard.app - INFO - Market summary retrieved: True
2025-06-26 15:35:59,130 - src.dashboard.app - WARNING - No analysis results available
2025-06-26 15:35:59,131 - werkzeug - INFO - 127.0.0.1 - - [26/Jun/2025 15:35:59] "GET /api/top-vehicles?limit=20 HTTP/1.1" 200 -
2025-06-26 15:35:59,135 - src.database.database_manager - INFO - Retrieved 0 analysis results
2025-06-26 15:35:59,136 - src.dashboard.app - INFO - Analysis results count: 0
2025-06-26 15:35:59,139 - src.dashboard.app - INFO - Database stats: {'uk_market_data': 699, 'japan_auction_data': 0, 'government_data': 0, 'analysis_results': 0, 'database_size_mb': 0.45}
2025-06-26 15:35:59,140 - src.dashboard.app - INFO - Summary prepared with 0 opportunities
2025-06-26 15:35:59,141 - werkzeug - INFO - 127.0.0.1 - - [26/Jun/2025 15:35:59] "GET /api/summary HTTP/1.1" 200 -
2025-06-26 15:35:59,157 - src.database.database_manager - INFO - Retrieved 699 UK market records
2025-06-26 15:35:59,160 - src.database.database_manager - INFO - Retrieved 699 UK market records
2025-06-26 15:35:59,163 - src.database.database_manager - INFO - Retrieved 0 Japan auction records
2025-06-26 15:35:59,166 - werkzeug - INFO - 127.0.0.1 - - [26/Jun/2025 15:35:59] "GET /api/market-trends HTTP/1.1" 200 -
2025-06-26 15:35:59,169 - src.database.database_manager - INFO - Retrieved 0 Japan auction records
2025-06-26 15:35:59,173 - src.database.database_manager - INFO - Retrieved 0 analysis results
2025-06-26 15:35:59,176 - werkzeug - INFO - 127.0.0.1 - - [26/Jun/2025 15:35:59] "GET /api/data-status HTTP/1.1" 200 -
